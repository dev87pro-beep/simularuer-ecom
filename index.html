<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة إدارة احترافية | Semantic Icons</title>
    <!-- مكتبة الأيقونات -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- خط عربي (Cairo) -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* --- Semantic Icon Palette --- */
            /* الخلفية البيضاء النقية */
            --bg-white: #ffffff;
            
            /* القائمة الجانبية (غامقة للمباينة مع الأبيض) */
            --sidebar-bg: #1e293b; 

            /* النصوص */
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --text-white: #f8fafc;

            /* ألوان الأيقونات (Semantic) */
            --icon-dashboard: #3b82f6;  /* أزرق سماوي للوحة */
            --icon-inventory: #d97706;  /* بني للصناديق */
            --icon-shipping: #0ea5e9;  /* أزرق محيطي للسفن */
            --icon-winning: #f59e0b;   /* ذهبي للنجاح */
            --icon-pages: #8b5cf6;     /* بنفسجي للمتاجر */
            --icon-calc: #10b981;       /* أخضر زمردي للحساب */
            --icon-plus: #10b981;       /* أخضر للإضافة */
            --icon-edit: #64748b;        /* رمادي للتعديل */
            --icon-delete: #ef4444;     /* أحمر للحذف */
            --icon-check: #10b981;       /* أخضر للتأكيد */
            
            /* حدود وظلال */
            --border: #e5e7eb;
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            
            --sidebar-width: 260px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-white);
            color: var(--text-main);
            display: flex;
            min-height: 100vh;
        }

        /* --- Sidebar --- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--sidebar-bg);
            color: var(--text-white);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            right: 0;
            top: 0;
            z-index: 50;
            border-left: 1px solid rgba(255,255,255,0.1);
            box-shadow: -5px 0 25px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 35px 25px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .sidebar-header h2 { font-size: 1.4rem; font-weight: 700; color: var(--text-white); }

        .nav-links { list-style: none; padding: 20px 0; flex-grow: 1; }
        .nav-links li { margin-bottom: 10px; }
        
        .nav-links a {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            color: #cbd5e1;
            text-decoration: none;
            transition: all 0.2s ease;
            border-radius: 10px;
            font-weight: 500;
        }

        .nav-links a:hover {
            background-color: rgba(255,255,255,0.1);
            color: var(--text-white);
            transform: translateX(-5px);
        }

        .nav-links a.active {
            background-color: var(--icon-dashboard); /* لون الأيقونة النشطة */
            color: var(--text-white);
            font-weight: 700;
        }

        .nav-links a i { 
            margin-left: 15px; 
            width: 22px; 
            text-align: center; 
            font-size: 1.2rem; 
        }

        /* --- Main Content --- */
        .main-content {
            margin-right: var(--sidebar-width);
            width: calc(100% - var(--sidebar-width));
            padding: 40px;
            transition: all 0.3s ease;
            background-color: var(--bg-white);
        }

        /* --- Header --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            background: var(--bg-white);
            padding: 25px 30px;
            border-radius: 16px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
        }
        header h1 { font-size: 1.7rem; font-weight: 800; color: var(--text-main); }

        /* --- Sections Visibility --- */
        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Dashboard Grid --- */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 30px;
            grid-auto-rows: min-content;
        }

        /* --- 1. KPI Cards (Semantic Icons) --- */
        .kpi-section { grid-column: span 12; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }

        .kpi-card {
            background: var(--bg-white);
            padding: 35px;
            border-radius: 16px;
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            border: 1px solid var(--border);
            transition: transform 0.2s;
            border-bottom: 4px solid transparent; /* خط ملون سفلي يعتمد على الايقونة */
        }
        .kpi-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); }

        /* تلوين الأيقونات والحدود بالألوان المخصصة */
        .kpi-blue { border-bottom-color: var(--icon-dashboard); }
        .kpi-orange { border-bottom-color: var(--icon-shipping); }
        .kpi-green { border-bottom-color: var(--icon-calc); }
        .kpi-purple { border-bottom-color: var(--icon-winning); }

        .kpi-info h4 { font-size: 0.95rem; color: var(--text-muted); font-weight: 600; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .kpi-info p { font-size: 2.4rem; font-weight: 800; color: var(--text-main); }
        .kpi-icon { font-size: 3rem; opacity: 0.1; transition: 0.2s; }
        .kpi-card:hover .kpi-icon { opacity: 0.8; transform: scale(1.05); }

        /* --- 2. Action Bar --- */
        .actions-section { grid-column: span 12; margin-bottom: 30px; }
        .actions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(190px, 1fr)); gap: 20px; }
        
        .action-card {
            background: var(--bg-white);
            padding: 30px;
            border-radius: 14px;
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--border);
        }
        .action-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-md); border-color: var(--border); }
        
        .action-card i { font-size: 2.8rem; margin-bottom: 15px; transition: 0.3s; }
        .action-card span { font-weight: 700; font-size: 1.15rem; color: var(--text-main); }

        /* Action Icon Colors */
        .act-blue:hover i { color: var(--icon-dashboard); }      /* أزرق للمخزون */
        .act-green:hover i { color: var(--icon-winning); }       /* ذهبي للفوز */
        .act-orange:hover i { color: var(--icon-shipping); }     /* أزرق سفن للشحن */
        .act-purple:hover i { color: var(--icon-pages); }       /* بنفسجي للصفحات */
        .act-gray:hover i { color: var(--icon-calc); }          /* أخضر للحاسبة */

        /* --- 3. Winning Section --- */
        .winning-section { grid-column: span 8; display: flex; flex-direction: column; gap: 30px; }
        .card {
            background: var(--bg-white);
            border-radius: 16px;
            box-shadow: var(--shadow-sm);
            padding: 30px;
            height: 100%;
            border: 1px solid var(--border);
        }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #f3f4f6; padding-bottom: 20px; }
        .card-header h3 { font-size: 1.3rem; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 15px; }
        
        .top-list { display: flex; flex-direction: column; gap: 20px; }
        .top-item {
            display: flex; align-items: center; justify-content: space-between;
            background: #f9fafb; padding: 18px 25px;
            border-radius: 14px;
            border-right: 5px solid transparent;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        .top-item:hover { 
            background: var(--bg-white); 
            box-shadow: var(--shadow-md); 
            transform: translateX(-8px); 
            border-right-color: var(--icon-winning);
        }
        
        .item-info { display: flex; align-items: center; gap: 20px; flex-grow: 1; }
        .item-img { width: 70px; height: 70px; border-radius: 12px; object-fit: cover; border: 1px solid var(--border); }
        .item-name { font-weight: 700; font-size: 1.2rem; color: var(--text-main); }
        .item-sub { font-size: 0.95rem; color: var(--text-muted); }
        .item-metrics { display: flex; align-items: center; gap: 15px; }
        .metric-badge { background: #fef3c7; color: #d97706; padding: 8px 16px; border-radius: 25px; font-weight: 700; font-size: 0.95rem; }
        .btn-icon { width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 12px; border: none; cursor: pointer; transition: 0.2s; color: white; }
        .btn-icon:hover { transform: scale(1.1); }
        .bg-green { background: var(--icon-calc); }
        .bg-red { background: var(--icon-delete); }

        /* --- 4. Stock Section --- */
        .stock-section { grid-column: span 4; display: flex; flex-direction: column; gap: 30px; }
        .stock-row { display: flex; justify-content: space-between; padding: 18px 25px; background: #f9fafb; border-radius: 14px; margin-bottom: 15px; font-size: 1.1rem; color: var(--text-main); border-right: 5px solid transparent; transition: 0.3s; }
        .stock-row:hover { background: #fff; box-shadow: var(--shadow-sm); border-right-color: var(--icon-inventory); transform: translateX(-8px); }
        .stock-row span:first-child { font-weight: 700; }
        .stock-row span:last-child { font-weight: 800; color: var(--icon-delete); }

        /* --- 5. Pages Section --- */
        .pages-section { grid-column: span 8; display: flex; flex-direction: column; gap: 30px; }
        .page-link { display: flex; justify-content: space-between; padding: 18px 25px; background: #f9fafb; border-radius: 14px; text-decoration: none; font-weight: 700; margin-bottom: 15px; border: 1px solid transparent; align-items: center; color: var(--text-main); }
        .page-link:hover { background: #fff; transform: translateX(-5px); box-shadow: var(--shadow-sm); border-color: var(--icon-pages); color: var(--icon-pages); }
        .page-icon { font-size: 1.3rem; color: var(--icon-pages); }

        /* --- 6. Full Sections --- */
        .card-grid-full { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
        .product-card { background: var(--bg-white); border-radius: 16px; overflow: hidden; box-shadow: var(--shadow-sm); border: 1px solid var(--border); transition: 0.4s; }
        .product-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-md); }
        .product-img { width: 100%; height: 220px; object-fit: cover; border-bottom: 1px solid #f3f4f6; background-color: #f3f4f6; }
        .product-body { padding: 30px; }
        .product-title { font-weight: 700; font-size: 1.3rem; margin-bottom: 15px; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .product-meta { font-size: 1rem; color: var(--text-muted); margin-bottom: 12px; display: flex; justify-content: space-between; }
        .product-actions { padding: 20px 30px; border-top: 1px solid #f3f4f6; display: flex; justify-content: flex-end; gap: 15px; }
        .badge { padding: 6px 16px; border-radius: 25px; font-size: 0.85rem; font-weight: 700; display: inline-block; }
        .badge-success { background: #d1fae5; color: #065f46; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #b91c1c; }

        /* --- 7. Calculator --- */
        .calc-wrapper { background: var(--bg-white); padding: 50px; border-radius: 20px; box-shadow: var(--shadow-sm); border: 1px solid var(--border); max-width: 1000px; margin: 0 auto; border-bottom: 6px solid var(--icon-calc); }
        .calc-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .calc-group { margin-bottom: 30px; position: relative; }
        .calc-group label { display: block; margin-bottom: 12px; font-weight: 700; color: var(--text-main); font-size: 1.1rem; }
        .calc-group i { position: absolute; left: 25px; top: 50%; transform: translateY(-50%); color: var(--icon-calc); font-size: 1.3rem; }
        .calc-control { width: 100%; padding: 16px 25px 16px 50px; border: 1px solid #e2e8f0; border-radius: 10px; font-family: inherit; font-size: 1.1rem; background: #f9fafb; transition: 0.3s; }
        .calc-control:focus { border-color: var(--icon-dashboard); background: #fff; box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2); }
        .calc-res { margin-top: 40px; padding: 25px; background: #f9fafb; border-radius: 16px; border: 2px dashed #cbd5e1; display: flex; justify-content: space-around; text-align: center; }
        .res-box { flex: 1; }
        .res-box h5 { font-size: 1rem; color: var(--text-muted); margin-bottom: 10px; font-weight: 700; }
        .res-box span { font-size: 2.2rem; font-weight: 800; color: var(--text-main); }

        /* --- 8. Modal --- */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: none; align-items: center; justify-content: center; z-index: 1000; opacity: 0; transition: opacity 0.3s; }
        .modal.open { display: flex; opacity: 1; }
        .modal-content { background: var(--bg-white); padding: 40px; border-radius: 20px; width: 100%; max-width: 600px; position: relative; transform: scale(0.9); transition: transform 0.3s; border: 1px solid var(--border); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1); max-height: 90vh; overflow-y: auto; }
        .modal.open .modal-content { transform: scale(1); }
        .close-modal { position: absolute; left: 30px; top: 30px; background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 50%; color: var(--text-muted); font-size: 2rem; cursor: pointer; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .close-modal:hover { background: #fee2e2; color: var(--icon-delete); }
        
        .form-group { margin-bottom: 30px; }
        .form-label { display: block; margin-bottom: 10px; font-weight: 700; color: var(--text-main); font-size: 1.1rem; }
        .form-input { width: 100%; padding: 15px; border: 1px solid #e2e8f0; border-radius: 10px; font-family: inherit; font-size: 1.1rem; background: #f9fafb; transition: 0.3s; }
        .form-input:focus { border-color: var(--icon-dashboard); background: #fff; }
        .btn { padding: 15px 30px; border: none; border-radius: 10px; cursor: pointer; font-family: inherit; font-weight: 700; transition: 0.3s; display: inline-flex; align-items: center; justify-content: center; gap: 12px; color: white; }
        .btn-primary { background: var(--icon-dashboard); }
        .btn-success { background: var(--icon-calc); }
        .btn-warning { background: var(--icon-shipping); }
        .btn-purple { background: var(--icon-pages); }
        .btn-icon-sm { width: 40px; height: 40px; padding: 0; border: none; border-radius: 8px; cursor: pointer; transition: 0.2s; color: white; }
        .btn-edit-sm { background: var(--icon-dashboard); }
        .btn-delete-sm { background: var(--icon-delete); }

        /* --- 9. Toast --- */
        .toast-container { position: fixed; bottom: 40px; left: 40px; z-index: 2000; display: flex; flex-direction: column; gap: 15px; }
        .toast { background: var(--text-main); color: white; padding: 18px 30px; border-radius: 12px; box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); display: flex; align-items: center; gap: 15px; min-width: 350px; border-right: 6px solid var(--icon-calc); animation: slideIn 0.5s; }
        .toast.error { border-right-color: var(--icon-delete); }
        @keyframes slideIn { from { transform: translateX(-60px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* --- Toolbar --- */
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .toolbar h2 { font-size: 1.8rem; font-weight: 800; color: var(--text-main); }

        /* --- Responsive --- */
        @media (max-width: 1024px) {
            .dashboard-grid > div { grid-column: span 12; }
            .winning-section, .stock-section, .pages-section { grid-column: span 12; }
        }
        @media (max-width: 768px) {
            .sidebar { transform: translateX(100%); }
            .sidebar.active { transform: translateX(0); }
            .main-content { margin-right: 0; width: 100%; padding: 25px; }
            .toggle-menu { display: block; font-size: 1.8rem; cursor: pointer; margin-left: 25px; color: var(--text-main); }
        }
        @media (min-width: 769px) { .toggle-menu { display: none; } }
        
        .empty-state { text-align: center; padding: 60px 20px; color: var(--text-muted); background: #f9fafb; border-radius: 16px; border: 2px dashed #e5e7eb; grid-column: 1 / -1; }

        /* أيقونات المساعدة الداخلية */
        .icon-dashboard { color: var(--icon-dashboard); }
        .icon-inventory { color: var(--icon-inventory); }
        .icon-shipping { color: var(--icon-shipping); }
        .icon-winning { color: var(--icon-winning); }
        .icon-pages { color: var(--icon-pages); }
        .icon-calc { color: var(--icon-calc); }
        .icon-edit { color: var(--icon-edit); }
        .icon-delete { color: var(--icon-delete); }
        .icon-check { color: var(--icon-check); }
        .icon-plus { color: var(--icon-plus); }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-layer-group fa-2x icon-dashboard"></i> <!-- أيقونة زرقاء -->
            <h2>لوحة الإدارة</h2>
        </div>
        <ul class="nav-links">
            <li><a href="#" onclick="switchTab('dashboard')" class="active"><i class="fas fa-th-large icon-dashboard"></i> الرئيسية</a></li>
            <li><a href="#" onclick="switchTab('inventory')"><i class="fas fa-boxes icon-inventory"></i> المخزون</a></li>
            <li><a href="#" onclick="switchTab('importing')"><i class="fas fa-shipping-fast icon-shipping"></i> الاستيراد</a></li>
            <li><a href="#" onclick="switchTab('winning')"><i class="fas fa-trophy icon-winning"></i> المنتجات الرابحة</a></li>
            <li><a href="#" onclick="switchTab('pages')"><i class="fas fa-store icon-pages"></i> أفضل الصفحات</a></li>
            <li><a href="#" onclick="switchTab('calculator')"><i class="fas fa-calculator icon-calc"></i> الآلة الحاسبة</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <header>
            <div style="display:flex; align-items:center;">
                <i class="fas fa-bars toggle-menu" style="color: var(--text-main);"></i>
                <h1>لوحة التحكم</h1>
            </div>
            <div style="display:flex; align-items:center; gap:20px;">
                <div style="text-align:left;">
                    <div style="font-size:0.9rem; color:var(--text-muted);">مرحباً بك</div>
                    <div style="font-weight:700; color: var(--text-main);">المسؤول</div>
                </div>
                <div style="width:50px; height:50px; background: #f3f4f6; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-user" style="color: var(--icon-edit);"></i>
                </div>
            </div>
        </header>

        <!-- 1. DASHBOARD -->
        <section id="dashboard" class="section active">
            <div class="dashboard-grid">
                
                <!-- KPI -->
                <div class="kpi-section">
                    <div class="kpi-card kpi-blue">
                        <div class="kpi-info"><h4>منتجات رابحة</h4><p id="kpi-winning">0</p></div>
                        <i class="fas fa-check-circle kpi-icon icon-dashboard"></i>
                    </div>
                    <div class="kpi-card kpi-orange">
                        <div class="kpi-info"><h4>قيد الاستيراد</h4><p id="kpi-importing">0</p></div>
                        <i class="fas fa-shipping-fast kpi-icon icon-shipping"></i>
                    </div>
                    <div class="kpi-card kpi-purple">
                        <div class="kpi-info"><h4>رأس المال المستثمر</h4><p id="kpi-capital">0 <span style="font-size:1.3rem; font-weight:400;">MAD</span></p></div>
                        <i class="fas fa-coins kpi-icon icon-winning"></i>
                    </div>
                    <div class="kpi-card kpi-green">
                        <div class="kpi-info"><h4>الربح المتوقع</h4><p id="kpi-profit">0 <span style="font-size:1.3rem; font-weight:400;">MAD</span></p></div>
                        <i class="fas fa-chart-line kpi-icon icon-calc"></i>
                    </div>
                </div>

                <!-- Actions -->
                <div class="actions-section">
                    <div class="actions-grid">
                        <div class="action-card act-blue" onclick="openModal('inventory')">
                            <i class="fas fa-plus-circle icon-plus"></i>
                            <span>منتج جديد</span>
                        </div>
                        <div class="action-card act-green" onclick="openModal('winning')">
                            <i class="fas fa-trophy icon-winning"></i>
                            <span>منتج رابح</span>
                        </div>
                        <div class="action-card act-orange" onclick="openModal('importing')">
                            <i class="fas fa-dolly icon-shipping"></i>
                            <span>استيراد</span>
                        </div>
                        <div class="action-card act-purple" onclick="openModal('pages')">
                            <i class="fas fa-store icon-pages"></i>
                            <span>صفحة ناجحة</span>
                        </div>
                        <div class="action-card" onclick="switchTab('calculator')">
                            <i class="fas fa-calculator icon-calc"></i>
                            <span>الآلة الحاسبة</span>
                        </div>
                    </div>
                </div>

                <!-- Winning -->
                <div class="card winning-section">
                    <div class="card-header">
                        <h3><i class="fas fa-crown icon-winning" style="color: var(--icon-winning);"></i> أفضل المنتجات الرابحة</h3>
                    </div>
                    <div class="top-list" id="top-winning-list"></div>
                </div>

                <!-- Stock & Pages -->
                <div class="card stock-section">
                    <div class="card-header"><h3><i class="fas fa-boxes icon-inventory" style="color: var(--icon-inventory);"></i> المخزون المهدد</h3></div>
                    <div id="stock-alert-container"></div>
                </div>
                <div class="card pages-section">
                    <div class="card-header"><h3><i class="fas fa-link icon-pages" style="color: var(--icon-pages);"></i> أفضل الصفحات</h3></div>
                    <div id="best-pages-list"></div>
                </div>

            </div>
        </section>

        <!-- OTHER SECTIONS -->
        <section id="inventory" class="section">
            <div class="toolbar">
                <h2>المخزون</h2>
                <button class="btn btn-primary" onclick="openModal('inventory')"><i class="fas fa-plus icon-plus"></i> إضافة منتج</button>
            </div>
            <div id="inventory-list" class="card-grid-full"></div>
        </section>

        <section id="importing" class="section">
            <div class="toolbar">
                <h2>الاستيراد</h2>
                <button class="btn btn-warning" onclick="openModal('importing')"><i class="fas fa-plus icon-plus"></i> إضافة منتج</button>
            </div>
            <div id="importing-list" class="card-grid-full"></div>
        </section>

        <section id="winning" class="section">
            <div class="toolbar">
                <h2>المنتجات الرابحة</h2>
                <button class="btn btn-success" onclick="openModal('winning')"><i class="fas fa-plus icon-plus"></i> إضافة منتج رابح</button>
            </div>
            <div id="winning-list" class="card-grid-full"></div>
        </section>

        <section id="pages" class="section">
            <div class="toolbar">
                <h2>أفضل الصفحات</h2>
                <button class="btn btn-purple" onclick="openModal('pages')"><i class="fas fa-plus icon-plus"></i> إضافة صفحة</button>
            </div>
            <div id="pages-list" class="card-grid-full"></div>
        </section>

        <section id="calculator" class="section">
            <div class="toolbar">
                <h2>الآلة الحاسبة</h2>
            </div>
            <div class="calc-wrapper">
                <div class="calc-inputs">
                    <div class="calc-group">
                        <label>ثمن شراء المنتج (MAD)</label>
                        <input type="number" id="calc-buy-price" placeholder="0.00" class="calc-control" oninput="calculateProfit()">
                        <i class="fas fa-dollar-sign icon-dashboard"></i>
                    </div>
                    <div class="calc-group">
                        <label>ثمن التوصيل (MAD)</label>
                        <input type="number" id="calc-delivery" placeholder="0.00" class="calc-control" oninput="calculateProfit()">
                        <i class="fas fa-truck icon-shipping"></i>
                    </div>
                    <div class="calc-group">
                        <label>ثمن الإشهار / Ads (MAD)</label>
                        <input type="number" id="calc-ads" placeholder="0.00" class="calc-control" oninput="calculateProfit()">
                        <i class="fas fa-bullhorn icon-pages"></i>
                    </div>
                    <div class="calc-group">
                        <label>هامش الربح المطلوب (MAD)</label>
                        <input type="number" id="calc-margin" placeholder="0.00" class="calc-control" oninput="calculateProfit()">
                        <i class="fas fa-percentage icon-calc"></i>
                    </div>
                </div>
                
                <div class="calc-res">
                    <div class="res-box">
                        <h5>السعر النهائي للبيع</h5>
                        <span id="res-sale" style="color: var(--icon-dashboard);">0 <span>MAD</span></span>
                    </div>
                    <div class="res-box">
                        <h5>الربح الصافي</h5>
                        <span id="res-net" style="color: var(--icon-calc);">0 <span>MAD</span></span>
                    </div>
                    <div class="res-box">
                        <h5>السعر بالدولار (USD)</h5>
                        <span id="res-usd" style="font-size: 1.7rem;">$0.00</span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- MODAL -->
    <div class="modal" id="modal-overlay">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()"><i class="fas fa-times"></i></button>
            <h2 style="margin-bottom: 40px; font-weight: 800; color: var(--text-main);" id="modal-title">عنوان النافذة</h2>
            <div id="modal-form-body"></div>
        </div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <script>
        // --- STATE ---
        const db = {
            inventory: JSON.parse(localStorage.getItem('inventory')) || [],
            importing: JSON.parse(localStorage.getItem('importing')) || [],
            winning: JSON.parse(localStorage.getItem('winning')) || [],
            pages: JSON.parse(localStorage.getItem('pages')) || []
        };

        const USD_RATE = 9;

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
            renderFullSections();
        });

        // --- NAVIGATION ---
        function switchTab(tabId) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            
            document.querySelectorAll('.nav-links a').forEach(link => link.classList.remove('active'));
            event.currentTarget.classList.add('active');

            if(tabId === 'dashboard') renderDashboard();
            if(tabId === 'inventory') renderInventory();
            if(tabId === 'importing') renderImporting();
            if(tabId === 'winning') renderWinning();
            if(tabId === 'pages') renderPages();
            if(tabId === 'calculator') {
                document.getElementById('calc-buy-price').value = '';
                document.getElementById('calc-delivery').value = '';
                document.getElementById('calc-ads').value = '';
                document.getElementById('calc-margin').value = '';
                calculateProfit();
            }

            if(window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // --- DASHBOARD RENDERER ---
        function renderDashboard() {
            // KPI
            const winningValid = db.winning.filter(w => w.status === 'valid').length;
            const importing = db.importing.length;

            document.getElementById('kpi-winning').innerText = winningValid;
            document.getElementById('kpi-importing').innerText = importing;

            let capital = 0;
            let profit = 0;

            db.inventory.forEach(p => capital += (p.price * p.quantity));
            db.importing.forEach(p => capital += (p.price * p.quantity));
            db.winning.forEach(p => capital += (p.buyPrice * p.quantity));
            db.winning.forEach(p => profit += (p.margin * p.quantity));

            document.getElementById('kpi-capital').innerHTML = `${capital.toLocaleString()} <span style="font-size:1.3rem; font-weight:400;">MAD</span>`;
            document.getElementById('kpi-profit').innerHTML = `${profit.toLocaleString()} <span style="font-size:1.3rem; font-weight:400;">MAD</span>`;

            // Top Winning
            const list = document.getElementById('top-winning-list');
            list.innerHTML = '';
            
            const sorted = [...db.winning].filter(p => p.status === 'valid').sort((a, b) => b.margin - a.margin).slice(0, 6);
            if(sorted.length === 0) list.innerHTML = '<div style="text-align:center; color:#cbd5e1; padding:25px;">لا توجد منتجات رابحة</div>';
            else {
                sorted.forEach(p => {
                    list.innerHTML += `
                        <div class="top-item">
                            <div class="item-info">
                                <img src="${p.image || 'https://via.placeholder.com/70'}" class="item-img">
                                <div>
                                    <div class="item-name">${p.name}</div>
                                    <div class="item-sub">مبيع: ${p.salePrice} MAD</div>
                                </div>
                            </div>
                            <div class="item-metrics">
                                <div class="metric-badge">+${p.margin} MAD</div>
                                <div style="display:flex;">
                                    <button class="btn-icon bg-green" onclick="toggleStatus(${p.id})"><i class="fas fa-check icon-check"></i></button>
                                    <button class="btn-icon bg-red" onclick="deleteItem('winning', ${p.id})"><i class="fas fa-trash icon-delete"></i></button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }

            // Stock Alert
            const stockContainer = document.getElementById('stock-alert-container');
            stockContainer.innerHTML = '';
            const lowStockItems = db.inventory.filter(p => p.quantity < 10);
            if(lowStockItems.length === 0) stockContainer.innerHTML = '<div style="text-align:center; color:#cbd5e1; padding:15px;">المخزون في حالة جيدة</div>';
            else {
                lowStockItems.forEach(p => {
                    stockContainer.innerHTML += `<div class="stock-row"><span>${p.name}</span><span>${p.quantity} قطعة</span></div>`;
                });
            }

            // Best Pages
            const pagesContainer = document.getElementById('best-pages-list');
            pagesContainer.innerHTML = '';
            if(db.pages.length === 0) pagesContainer.innerHTML = '<div style="text-align:center; color:#cbd5e1; padding:15px;">لم يتم حفظ أي صفحة</div>';
            else {
                db.pages.forEach(p => {
                    pagesContainer.innerHTML += `
                        <a href="${p.link}" target="_blank" class="page-link">
                            <span>${p.name}</span>
                            <i class="fas fa-external-link-alt page-icon"></i>
                        </a>
                    `;
                });
            }
        }

        // --- FULL SECTIONS RENDERERS ---
        function renderFullSections() {
            renderInventory();
            renderImporting();
            renderWinning();
            renderPages();
        }

        function renderInventory() {
            const container = document.getElementById('inventory-list');
            container.innerHTML = db.inventory.length ? '' : '<div class="empty-state">المخزون فارغ</div>';
            db.inventory.forEach(item => {
                container.innerHTML += `
                    <div class="product-card">
                        <img src="${item.image || 'https://via.placeholder.com/300x220?text=No+Image'}" class="product-img">
                        <div class="product-body">
                            <div class="product-title">${item.name}</div>
                            <div class="product-meta"><span>الكمية: ${item.quantity}</span><span>السعر: ${item.price} MAD</span></div>
                            <div class="product-meta"><span>الاستثمار: ${(item.price * item.quantity).toFixed(1)}</span></div>
                        </div>
                        <div class="product-actions">
                            <button class="btn-icon-sm btn-edit-sm" onclick="showPreview('inventory', ${item.id})"><i class="fas fa-eye icon-dashboard"></i></button>
                            <button class="btn-icon-sm btn-edit-sm" onclick="openModal('inventory', ${item.id})"><i class="fas fa-edit icon-edit"></i></button>
                            <button class="btn-icon-sm btn-delete-sm" onclick="deleteItem('inventory', ${item.id})"><i class="fas fa-trash icon-delete"></i></button>
                        </div>
                    </div>
                `;
            });
        }

        function renderImporting() {
            const container = document.getElementById('importing-list');
            container.innerHTML = db.importing.length ? '' : '<div class="empty-state">لا توجد واردات</div>';
            db.importing.forEach(item => {
                container.innerHTML += `
                    <div class="product-card">
                        <img src="${item.image || 'https://via.placeholder.com/300x220?text=No+Image'}" class="product-img">
                        <div class="product-body">
                            <div class="product-title">${item.name}</div>
                            <div class="product-meta"><span>الكمية: ${item.quantity}</span><span>السعر: ${item.price} MAD</span></div>
                            <div class="product-meta"><span>الاستثمار: ${(item.price * item.quantity).toFixed(1)}</span><span class="badge badge-warning">قيد الاستيراد</span></div>
                        </div>
                        <div class="product-actions">
                            <button class="btn-icon-sm btn-edit-sm" onclick="openModal('importing', ${item.id})"><i class="fas fa-pen icon-edit"></i></button>
                            <button class="btn-icon-sm btn-delete-sm" onclick="deleteItem('importing', ${item.id})"><i class="fas fa-trash icon-delete"></i></button>
                        </div>
                    </div>
                `;
            });
        }

        function renderWinning() {
            const container = document.getElementById('winning-list');
            container.innerHTML = db.winning.length ? '' : '<div class="empty-state">لم يتم إضافة منتجات رابحة</div>';
            db.winning.forEach(item => {
                let statusBadge = item.status === 'valid' ? '<span class="badge badge-success">Valid</span>' : '<span class="badge badge-danger">Invalid</span>';
                
                let links = `<div style="font-size:0.9rem; margin-top:10px; word-break:break-all;">
                    ${item.alibaba ? `<a href="${item.alibaba}" target="_blank" style="color:var(--icon-shipping);"><i class="fas fa-link"></i> Alibaba</a>` : ''}
                    ${item.store ? `<a href="${item.store}" target="_blank" style="color:var(--icon-dashboard); margin-right:12px;"><i class="fas fa-link"></i> Store</a>` : ''}
                </div>`;

                container.innerHTML += `
                    <div class="product-card">
                        <img src="${item.image || 'https://via.placeholder.com/300x220?text=No+Image'}" class="product-img">
                        <div class="product-body">
                            <div class="product-title">${item.name}</div>
                            <div class="product-meta"><span>شراء: ${item.buyPrice}</span><span>بيع: ${item.salePrice}</span></div>
                            <div class="product-meta"><span>هامش: ${item.margin}</span>${statusBadge}</div>
                            ${links}
                        </div>
                        <div class="product-actions">
                            <button class="btn-icon-sm btn-edit-sm" onclick="toggleStatus(${item.id})"><i class="fas fa-exchange-alt icon-edit"></i></button>
                            <button class="btn-icon-sm btn-edit-sm" onclick="openModal('winning', ${item.id})"><i class="fas fa-pen icon-edit"></i></button>
                            <button class="btn-icon-sm btn-delete-sm" onclick="deleteItem('winning', ${item.id})"><i class="fas fa-trash icon-delete"></i></button>
                        </div>
                    </div>
                `;
            });
        }

        function renderPages() {
            const container = document.getElementById('pages-list');
            container.innerHTML = db.pages.length ? '' : '<div class="empty-state">لم يتم إضافة أي صفحة</div>';
            db.pages.forEach(item => {
                container.innerHTML += `
                    <div class="product-card">
                        <div class="product-body">
                            <div class="product-title">${item.name}</div>
                            <a href="${item.link}" target="_blank" style="color:var(--icon-pages); text-decoration:none; font-weight:700; font-size:1.1rem; display:block; margin-bottom:15px;">
                                <i class="fas fa-external-link-alt page-icon"></i> زيارة الصفحة
                            </a>
                            <p style="font-size:0.9rem; color:var(--text-muted); height:60px; overflow:hidden;">${item.notes || 'لا توجد ملاحظات'}</p>
                        </div>
                        <div class="product-actions">
                            <button class="btn-icon-sm btn-edit-sm" onclick="openModal('pages', ${item.id})"><i class="fas fa-pen icon-edit"></i></button>
                            <button class="btn-icon-sm btn-delete-sm" onclick="deleteItem('pages', ${item.id})"><i class="fas fa-trash icon-delete"></i></button>
                        </div>
                    </div>
                `;
            });
        }

        // --- CALCULATOR ---
        function calculateProfit() {
            const buy = parseFloat(document.getElementById('calc-buy-price').value) || 0;
            const delivery = parseFloat(document.getElementById('calc-delivery').value) || 0;
            const ads = parseFloat(document.getElementById('calc-ads').value) || 0;
            const margin = parseFloat(document.getElementById('calc-margin').value) || 0;

            const totalCost = buy + delivery + ads;
            const salePrice = buy + delivery + ads + margin;
            const usdPrice = salePrice / USD_RATE;

            document.getElementById('res-sale').innerHTML = `${salePrice.toFixed(2)} <span>MAD</span>`;
            document.getElementById('res-net').innerHTML = `${margin.toFixed(2)} <span>MAD</span>`;
            document.getElementById('res-usd').innerText = `$${usdPrice.toFixed(2)}`;
        }

        // --- MODAL LOGIC ---
        let currentModalType = '';
        let editingId = null;
        let tempImage = '';

        function openModal(type, id = null) {
            currentModalType = type;
            editingId = id;
            tempImage = '';
            
            const modalTitle = document.getElementById('modal-title');
            const formBody = document.getElementById('modal-form-body');
            const modal = document.getElementById('modal-overlay');
            modal.classList.add('open');
            formBody.innerHTML = '';

            let data = {};
            if (id) {
                if(type === 'inventory') data = db.inventory.find(i => i.id === id);
                if(type === 'importing') data = db.importing.find(i => i.id === id);
                if(type === 'winning') data = db.winning.find(i => i.id === id);
                if(type === 'pages') data = db.pages.find(i => i.id === id);
                tempImage = data.image || '';
            }

            modalTitle.innerText = id ? 'تعديل ' + getTitle(type) : 'إضافة ' + getTitle(type);

            if (type === 'inventory' || type === 'importing') {
                const isInv = type === 'inventory';
                formBody.innerHTML = `
                    <div style="width:100%; height:160px; background:#f9fafb; border:2px dashed #cbd5e1; border-radius:12px; display:flex; align-items:center; justify-content:center; margin-bottom:25px; cursor:pointer;" onclick="document.getElementById('file-upload').click()">
                        ${tempImage ? `<img src="${tempImage}">` : '<span><i class="fas fa-camera fa-2x"></i><br>اضغط لرفع صورة</span>'}
                    </div>
                    <input type="file" id="file-upload" style="display:none" accept="image/*" onchange="handleImageUpload(this)">
                    
                    <div style="margin-top:20px;">
                        <label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">اسم المنتج</label>
                        <input type="text" id="inp-name" class="form-input" value="${data.name || ''}">
                    </div>
                    <div style="margin-top:20px;">
                        <label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">الكمية</label>
                        <input type="number" id="inp-qty" class="form-input" value="${data.quantity || 0}">
                    </div>
                    <div style="margin-top:20px;">
                        <label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">ثمن الاستثمار/الوحدة (MAD)</label>
                        <input type="number" id="inp-price" class="form-input" value="${data.price || 0}">
                    </div>
                    ${!isInv ? `
                    <div style="margin-top:20px;">
                        <label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">ملاحظات</label>
                        <textarea id="inp-notes" class="form-input" rows="3">${data.notes || ''}</textarea>
                    </div>` : ''}
                    
                    <button class="btn btn-primary" style="width:100%; margin-top:20px;" onclick="saveItem()">حفظ</button>
                `;
            } else if (type === 'winning') {
                formBody.innerHTML = `
                    <div style="width:100%; height:160px; background:#f9fafb; border:2px dashed #cbd5e1; border-radius:12px; display:flex; align-items:center; justify-content:center; margin-bottom:25px; cursor:pointer;" onclick="document.getElementById('file-upload').click()">
                        ${tempImage ? `<img src="${tempImage}">` : '<span><i class="fas fa-camera fa-2x"></i><br>اضغط لرفع صورة</span>'}
                    </div>
                    <input type="file" id="file-upload" style="display:none" accept="image/*" onchange="handleImageUpload(this)">

                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">اسم المنتج</label><input type="text" id="inp-name" class="form-input" value="${data.name || ''}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">سعر الشراء (MAD)</label><input type="number" id="inp-buy" class="form-input" value="${data.buyPrice || 0}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">سعر البيع (MAD)</label><input type="number" id="inp-sale" class="form-input" value="${data.salePrice || 0}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">هامش الربح (MAD)</label><input type="number" id="inp-margin" class="form-input" value="${data.margin || 0}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">رابط Alibaba</label><input type="text" id="inp-alibaba" class="form-input" value="${data.alibaba || ''}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">رابط المتجر</label><input type="text" id="inp-store" class="form-input" value="${data.store || ''}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">الحالة</label>
                        <select id="inp-status" class="form-input">
                            <option value="valid" ${data.status === 'valid' ? 'selected' : ''}>Valid (ناجح)</option>
                            <option value="invalid" ${data.status === 'invalid' ? 'selected' : ''}>Invalid (فاشل)</option>
                        </select>
                    </div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">الكمية</label><input type="number" id="inp-qty" class="form-input" value="${data.quantity || 0}"></div>
                    <button class="btn btn-success" style="width:100%; margin-top:20px;" onclick="saveItem()">حفظ</button>
                `;
            } else if (type === 'pages') {
                formBody.innerHTML = `
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">اسم الصفحة</label><input type="text" id="inp-name" class="form-input" value="${data.name || ''}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">الرابط</label><input type="text" id="inp-link" class="form-input" value="${data.link || ''}"></div>
                    <div style="margin-top:20px;"><label style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-main);">ملاحظات</label><textarea id="inp-notes" class="form-input" rows="3">${data.notes || ''}</textarea></div>
                    <button class="btn btn-purple" style="width:100%; margin-top:20px;" onclick="saveItem()">حفظ</button>
                `;
            }
        }

        function getTitle(type) {
            if(type === 'inventory') return 'منتج مخزون';
            if(type === 'importing') return 'منتج مستورد';
            if(type === 'winning') return 'منتج رابح';
            if(type === 'pages') return 'صفحة';
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('open');
        }

        function handleImageUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    tempImage = e.target.result;
                    input.previousElementSibling.innerHTML = `<img src="${tempImage}">`;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- SAVE LOGIC ---
        function saveItem() {
            if(currentModalType === 'inventory' || currentModalType === 'importing') {
                const name = document.getElementById('inp-name').value;
                const qty = parseInt(document.getElementById('inp-qty').value);
                const price = parseFloat(document.getElementById('inp-price').value);
                
                if(!name) { alert('الاسم مطلوب'); return; }

                const item = {
                    id: editingId || Date.now(),
                    name, quantity: qty, price, image: tempImage,
                    status: currentModalType === 'inventory' ? 'available' : 'importing',
                    notes: currentModalType === 'importing' ? document.getElementById('inp-notes').value : ''
                };

                const targetArray = currentModalType === 'inventory' ? db.inventory : db.importing;

                if (editingId) {
                    const idx = targetArray.findIndex(i => i.id === editingId);
                    targetArray[idx] = item;
                    showToast('تم التعديل بنجاح');
                } else {
                    targetArray.push(item);
                    showToast('تمت الإضافة بنجاح');
                }
            } else if (currentModalType === 'winning') {
                const name = document.getElementById('inp-name').value;
                const buy = parseFloat(document.getElementById('inp-buy').value);
                const sale = parseFloat(document.getElementById('inp-sale').value);
                const margin = parseFloat(document.getElementById('inp-margin').value);
                const qty = parseInt(document.getElementById('inp-qty').value) || 1;

                if(!name) { alert('الاسم مطلوب'); return; }

                const item = {
                    id: editingId || Date.now(),
                    name, buyPrice: buy, salePrice: sale, margin,
                    alibaba: document.getElementById('inp-alibaba').value,
                    store: document.getElementById('inp-store').value,
                    image: tempImage, status: document.getElementById('inp-status').value, quantity: qty
                };

                if (editingId) {
                    const idx = db.winning.findIndex(i => i.id === editingId);
                    db.winning[idx] = item;
                    showToast('تم التعديل بنجاح');
                } else {
                    db.winning.push(item);
                    showToast('تمت الإضافة بنجاح');
                }
            } else if (currentModalType === 'pages') {
                const name = document.getElementById('inp-name').value;
                const link = document.getElementById('inp-link').value;
                const notes = document.getElementById('inp-notes').value;

                if(!name || !link) { alert('الاسم والرابط مطلوبان'); return; }

                const item = { id: editingId || Date.now(), name, link, notes };
                if (editingId) {
                    const idx = db.pages.findIndex(i => i.id === editingId);
                    db.pages[idx] = item;
                } else {
                    db.pages.push(item);
                }
            }

            updateDB();
            closeModal();
            renderDashboard();
            renderFullSections();
        }

        // --- DELETE LOGIC ---
        function deleteItem(type, id) {
            if(confirm('هل أنت متأكد من الحذف؟')) {
                if(type === 'inventory') { db.inventory = db.inventory.filter(i => i.id !== id); renderInventory(); }
                if(type === 'importing') { db.importing = db.importing.filter(i => i.id !== id); renderImporting(); }
                if(type === 'winning') { db.winning = db.winning.filter(i => i.id !== id); renderWinning(); }
                if(type === 'pages') { db.pages = db.pages.filter(i => i.id !== id); renderPages(); }
                
                updateDB();
                renderDashboard();
                showToast('تم الحذف بنجاح');
            }
        }

        function toggleStatus(id) {
            const item = db.winning.find(i => i.id === id);
            if(item) {
                item.status = item.status === 'valid' ? 'invalid' : 'valid';
                updateDB();
                renderWinning();
                renderDashboard();
                showToast('تم تغيير الحالة');
            }
        }

        function showPreview(type, id) {
            openModal(type, id);
            const btn = document.querySelector('#modal-form-body button');
            if(btn) { btn.innerText = 'إغلاق'; btn.onclick = closeModal; }
        }

        // --- DB SYNC ---
        function updateDB() {
            localStorage.setItem('inventory', JSON.stringify(db.inventory));
            localStorage.setItem('importing', JSON.stringify(db.importing));
            localStorage.setItem('winning', JSON.stringify(db.winning));
            localStorage.setItem('pages', JSON.stringify(db.pages));
        }

        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `<i class="fas fa-check-circle icon-check" style="color:var(--bg-white);"></i> ${msg}`;
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
